<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC P2P Room</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <!-- Join Screen -->
    <div id="join-screen" class="screen active">
        <div class="card">
            <div class="card-header">
                <div class="icon-bg">
                    <i class="fas fa-video"></i>
                </div>
                <h1>Join Meeting</h1>
                <p>Secure P2P Video Chat</p>
            </div>
            
            <div class="input-group">
                <i class="fas fa-hashtag"></i>
                <input type="text" id="room-input" placeholder="Enter Room ID" autocomplete="off">
            </div>

            <p class="hint">
                <i class="fas fa-info-circle"></i> For Screen Sharing, please use Chrome, Edge, or Firefox on Desktop.
            </p>

            <button id="join-btn" class="primary-btn">
                <span>Join Room</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- Room Screen -->
    <div id="room-screen" class="screen" style="display: none;">
        <header class="room-header">
            <div class="room-info">
                <i class="fas fa-hashtag"></i>
                <span id="room-id-display">Room ID</span>
                <button id="copy-link-btn" class="icon-btn" title="Copy Invite Link">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
            <div class="connection-status">
                <div class="status-dot"></div>
                <span>Connected</span>
            </div>
        </header>

        <main id="video-grid">
            <div class="video-wrapper local">
                <div class="camera-off-indicator">
                    <i class="fas fa-desktop"></i>
                    <span>Sharing Screen</span>
                </div>
                <video id="local-video" autoplay playsinline muted></video>
                <div class="video-overlay">
                    <span class="user-label">You</span>
                    <div class="audio-indicator"><i class="fas fa-microphone"></i></div>
                </div>
            </div>
            <div class="video-wrapper remote placeholder">
                <div class="waiting-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Waiting for someone to join...</p>
                </div>
                <div class="camera-off-indicator">
                    <i class="fas fa-desktop"></i>
                    <span>Remote Screen</span>
                </div>
                <video id="remote-video" autoplay playsinline></video>
                <div class="video-overlay">
                    <span class="user-label">Remote</span>
                    <div class="audio-indicator"><i class="fas fa-microphone"></i></div>
                </div>
            </div>
        </main>

        <footer class="controls-bar">
            <button id="mic-btn" class="control-btn active" title="Toggle Microphone">
                <i class="fas fa-microphone"></i>
            </button>
            <button id="screen-btn" class="control-btn" title="Share Screen">
                <i class="fas fa-desktop"></i>
            </button>
            <button id="stop-share-btn" class="control-btn danger" title="Stop Sharing" style="display: none;">
                <i class="fas fa-stop-circle"></i>
            </button>
            <div class="divider"></div>
            <button id="settings-btn" class="control-btn" title="Settings">
                <i class="fas fa-cog"></i>
            </button>
            <button id="leave-btn" class="control-btn danger" title="Leave Room">
                <i class="fas fa-phone-slash"></i>
            </button>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="close-modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label>Video Quality</label>
                    <select id="quality-select">
                        <option value="high">High (720p)</option>
                        <option value="medium" selected>Medium (480p)</option>
                        <option value="low">Low (240p)</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>Frame Rate</label>
                    <select id="fps-select">
                        <option value="60">60 FPS</option>
                        <option value="30" selected>30 FPS</option>
                        <option value="15">15 FPS</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button id="apply-settings-btn" class="primary-btn">Apply Changes</button>
            </div>
        </div>
    </div>
</body>
</html>
