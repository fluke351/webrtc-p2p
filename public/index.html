<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏ô‡∏ó‡∏ô‡∏≤ WebRTC P2P</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <script>
        if (typeof io !== 'undefined') {
            console.log('Socket.io client loaded successfully');
        } else {
            console.error('Socket.io client failed to load');
            alert('‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á');
        }
    </script>
    <script src="script.js" defer></script>
</head>
<body>
    <!-- Join Screen -->
    <div id="join-screen" class="screen active">
        <div class="card">
            <div class="card-header">
                <div class="icon-bg">
                    <i class="fas fa-video"></i>
                </div>
                <h1>‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°</h1>
                <p>‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ä‡∏ó P2P ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</p>
            </div>
            
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="nickname-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)" autocomplete="off">
            </div>

            <div class="input-group">
                <i class="fas fa-hashtag"></i>
                <input type="text" id="room-input" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á" autocomplete="off">
            </div>

            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="password-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏´‡πâ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" autocomplete="off">
            </div>

            <p class="hint">
                <i class="fas fa-info-circle"></i> ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ ‡πÇ‡∏õ‡∏£‡∏î‡πÉ‡∏ä‡πâ Chrome, Edge ‡∏´‡∏£‡∏∑‡∏≠ Firefox ‡∏ö‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå
            </p>

            <button id="join-btn" class="primary-btn">
                <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- Room Screen -->
    <div id="room-screen" class="screen" style="display: none;">
        <header class="room-header">
            <div class="room-info">
                <i class="fas fa-hashtag"></i>
                <span id="room-id-display">‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á</span>
                <button id="copy-link-btn" class="icon-btn" title="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏ä‡∏¥‡∏ç">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
            <div class="connection-status">
                <div class="status-dot"></div>
                <span id="connection-text">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß</span>
                <span id="ping-display" style="font-size: 0.8rem; margin-left: 5px; opacity: 0.7;">(0ms)</span>
            </div>
        </header>

        <main id="video-grid">
            <div class="video-wrapper local">
                <div class="camera-off-indicator">
                    <i class="fas fa-desktop"></i>
                    <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏ä‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</span>
                </div>
                <video id="local-video" autoplay playsinline muted></video>
                <div class="video-overlay">
                    <span class="user-label">‡∏Ñ‡∏∏‡∏ì</span>
                    <div class="audio-indicator"><i class="fas fa-microphone"></i></div>
                </div>
            </div>
            <div class="video-wrapper remote placeholder">
                <div class="waiting-message">
                    <i class="fas fa-users"></i>
                    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°...</p>
                </div>
                <div class="camera-off-indicator">
                    <i class="fas fa-user-circle"></i>
                    <span>‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)</span>
                </div>
                <video id="remote-video" autoplay playsinline></video>
                <button id="pip-btn" class="icon-btn pip-btn" title="‡πÇ‡∏´‡∏°‡∏î‡∏†‡∏≤‡∏û‡∏ã‡πâ‡∏≠‡∏ô‡∏†‡∏≤‡∏û">
                    <i class="fas fa-images"></i>
                </button>
                <button id="expand-btn" class="icon-btn expand-btn" title="‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠">
                    <i class="fas fa-expand"></i>
                </button>
                <div class="video-overlay">
                    <span class="user-label">‡∏Ñ‡∏π‡πà‡∏™‡∏ô‡∏ó‡∏ô‡∏≤</span>
                    <div class="volume-control">
                        <i class="fas fa-volume-up"></i>
                        <input type="range" id="remote-volume" min="0" max="1" step="0.1" value="1">
                    </div>
                    <div class="audio-indicator"><i class="fas fa-microphone"></i></div>
                </div>
            </div>
        </main>

        <!-- Emoji Container -->
        <div id="emoji-container"></div>

        <!-- Chat Container -->
        <div id="chat-container" class="chat-container">
            <div class="chat-header">
                <h3>‡πÅ‡∏ä‡∏ó‡∏™‡∏î</h3>
                <button id="close-chat" class="icon-btn"><i class="fas fa-times"></i></button>
            </div>
            <div id="chat-messages" class="chat-messages"></div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." autocomplete="off">
                <button id="send-btn" class="icon-btn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>

        <footer class="controls-bar">
            <button id="mic-btn" class="control-btn active" title="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î ‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÇ‡∏ü‡∏ô">
                <i class="fas fa-microphone"></i>
            </button>
            <button id="screen-btn" class="control-btn" title="‡πÅ‡∏ä‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠">
                <i class="fas fa-desktop"></i>
            </button>
            <div class="reaction-wrapper">
                <button id="reaction-btn" class="control-btn" title="‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å">
                    <i class="fas fa-smile"></i>
                </button>
                <div class="reaction-menu">
                    <span data-emoji="‚ù§Ô∏è">‚ù§Ô∏è</span>
                    <span data-emoji="üòÇ">üòÇ</span>
                    <span data-emoji="üòÆ">üòÆ</span>
                    <span data-emoji="üëè">üëè</span>
                    <span data-emoji="üéâ">üéâ</span>
                </div>
            </div>

            <!-- Sound Board -->
            <div class="reaction-wrapper">
                <button id="sound-btn" class="control-btn" title="‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á">
                    <i class="fas fa-music"></i>
                </button>
                <div class="reaction-menu sound-menu">
                    <span data-sound="clap" title="‡∏õ‡∏£‡∏ö‡∏°‡∏∑‡∏≠">üëè</span>
                    <span data-sound="laugh" title="‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞">üòÇ</span>
                    <span data-sound="drum" title="‡∏Å‡∏•‡∏≠‡∏á">ü•Å</span>
                    <span data-sound="horn" title="‡πÅ‡∏ï‡∏£‡∏•‡∏°">üì¢</span>
                </div>
            </div>

            <button id="chat-btn" class="control-btn" title="‡πÅ‡∏ä‡∏ó">
                <i class="fas fa-comment-alt"></i>
            </button>
            <button id="stop-share-btn" class="control-btn danger" title="‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏ä‡∏£‡πå" style="display: none;">
                <i class="fas fa-stop-circle"></i>
            </button>
            <div class="divider"></div>
            <button id="leave-btn" class="control-btn danger" title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á">
                <i class="fas fa-phone-slash"></i>
            </button>
        </footer>
    </div>
</body>
</html>
